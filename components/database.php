<?php
// Initial data
$games = array(
  (object)[
    'title' => '2048',
    'descp' => 'Strategic incremental game.',
    'tags' => ['1 Player', 'Matching', 'Math', 'Mouse Skill', 'Puzzle'],
    'link' => 'https://codepen.io/fabi_yo_/embed/zNrmwZ?default-tab=html%2Cresul',
    'thumbnail' => 'assets/img/thumbnail/2048.png',
    'long_descp' => 'Engage your mind in the captivating 2048 game, a strategic puzzle that demands both skill and foresight. Swipe and combine numbered tiles on a 4x4 grid, aiming to reach the coveted 2048 tile. With each move, a new tile appears, and every decision matters. Can you outwit the grid and achieve the ultimate numerical feat? Its a minimalist design with maximum challenge!',
  ], (object) [
    'title' => 'Canvas Tetris',
    'descp' => 'Classic Game remade for the web.',
    'tags' => ['1 Player', 'Block', 'Tetris', 'Thinking', 'Puzzle'],
    'link' => 'https://dionyziz.com/graphics/canvas-tetris/',
    'thumbnail' => 'assets/img/thumbnail/tetris.png',
    'long_descp' => 'Challenges you to strategically arrange falling Tetriminos to complete horizontal lines. Easy to pick up but endlessly engaging, Tetris offers a thrilling test of your skills as the game speeds up. Whether youre a seasoned player or new to the Tetris world, experience the addictive joy of perfecting your block-stacking strategy in this classic game that continues to captivate players globally.',
  ], (object) [
    'title' => 'Monster Eating',
    'descp' => 'Eat smaller monsters and avoid bigger ones!.',
    'tags' => ['1 Player', 'Monster', 'Eating', 'Survival', 'Arcade', 'Featured'],
    'link' => 'https://games.construct.net/941/latest',
    'thumbnail' => 'assets/img/thumbnail/monster-eating.png',
    'long_descp' => '"Monster Eating" unleashes a voracious gaming experience where you control a hungry monster on a devouring spree! Navigate through diverse landscapes, strategically consuming enemies to grow in size and strength. Avoid formidable adversaries and conquer challenges as you satisfy your monsters insatiable appetite. With each successful feast, unlock new levels and power-ups. Dive into the thrill of relentless monster eating and see how mighty you can become in this action-packed game!',
  ], (object) [
    'title' => 'There Is No Game',
    'descp' => 'Unfortunately, there is no game.',
    'tags' => ['Not a Game', 'Really not a game', 'Definitely not a game', 'Puzzle', 'Featured'],
    'link' => 'https://games.construct.net/174/latest',
    'thumbnail' => 'assets/img/thumbnail/there-is-no-game.png',
    'long_descp' => 'There Is No Game',
  ], (object) [
    'title' => 'Ultra Pixel Survive',
    'descp' => 'Build barricades, furnaces and anvils to upgrade your weapons, collect resources like wood, stone and ores and evolve your favorite heroes!.',
    'tags' => ['1 Player', 'Survival', 'Pixel', 'Open-World', 'Adventure', '2d', 'Shooter', 'Simulation'],
    'link' => 'https://games.construct.net/26420/latest',
    'thumbnail' => 'assets/img/thumbnail/pixel-survive.png',
    'long_descp' => 'Try to survive as long as you can in this amazing game that mixes action RPG and survival. Build barricades, furnaces and anvils to upgrade your weapons, collect resources like wood, stone and ores and evolve your favorite heroes! Tired of bad games that fill your screen with advertisements? your problems are over! In Ultra Pixel Survive you have fun and your experience is not hindered by inconvenient ads! You only watch ads when you want gold and gems. Ultra Pixel Survival was developed with great care to innovate in the midst of so many bad and opportunistic mobile games.',
  ], (object) [
    'title' => 'Pixel Bear Adventure',
    'descp' => 'Join Pixel Bear on an epic adventure! Help him find his girlfriend, Peppermint!',
    'tags' => ['1 Player', 'Adventure', 'Keyboard Skill', '2d'],
    'link' => 'https://games.construct.net/904/latest',
    'thumbnail' => 'assets/img/thumbnail/pixel-bear-adventure.png',
    'long_descp' => 'Join Pixel Bear on an epic adventure! Help him find his girlfriend, Peppermint the Polar Bear!',
  ], (object) [
    'title' => 'Red Tie Runner',
    'descp' => 'Red Tie Runner is a simplistic, yet challenging, reflex-based, 2D platforming game..',
    'tags' => ['1 Player', 'Matching', 'Running', 'Keyboard Skill', 'Parkour', 'Arcade', 'Racing', 'Featured'],
    'link' => 'https://games.construct.net/1463/latest',
    'thumbnail' => 'assets/img/thumbnail/red-tie-runner.png',
    'long_descp' => 'Red Tie Runner is a simplistic, yet challenging, reflex-based, 2D platforming game. Play as a stickman with a red tie to dash and jump your way through obstacles. Features 30 intense levels, including 6 challenge levels, accompanied by spikes, trampolines, ziplines, wingsuits, lava, and more.',
  ], (object) [
    'title' => 'Fireboy and Watergirl 1: Forest Temple',
    'descp' => 'Fireboy and Watergirl 1 is the first cooperative platformer game in the Fireboy and Watergirl series',
    'tags' => ['2 Player', 'Matching', 'Math', 'Keyboard Skill', 'Puzzle'],
    'link' => 'https://www.gameflare.com/embed/fireboy-and-watergirl-forest-temple',
    'thumbnail' => 'assets/img/thumbnail/fireboy-and-watergirl-forest-temple-icon.png',
    'long_descp' => 'Explore the Forest Temple in search of diamonds. Switch between Fireboy & Watergirl and play alone or together as 2 players. The goal is to reach the exit safely, so be careful. Fireboy cannot touch water and Watergirl cannot touch fire.',
  ], (object) [
    'title' => 'Age of War 2',
    'descp' => 'The game takes you back to different warfare ages. You start with the Stone Age where there are dinosaurs, stone, meteor showers, and cavemen.',
    'tags' => ['1 Player', 'Matching', 'Army', 'Mouse Skill', 'Tower Defense', 'Action', 'Strategy'],
    'link' => 'https://www.gameflare.com/embed/age-of-war-2/',
    'thumbnail' => 'assets/img/thumbnail/age-of-war-2.png',
    'long_descp' => 'WAR ACROSS THE AGES! Train a massive army from cavemen riding dinosaurs to World War tanks! All the way to hugely devastating robot warriors from the future age! There are so many different units to train across 7 completely unique ages of war.',
  ], (object) [
    'title' => 'Knife Hit',
    'descp' => 'A great little game, with a simple premise and controls. The difficulty scales up as you progress, with fun and straightforward unlocks.',
    'tags' => ['1 Player', 'Fruit', 'Tap', 'Throwing', 'Mouse Skill', 'Arcade'],
    'link' => 'https://y8.com/embed/knife_hit_',
    'thumbnail' => 'assets/img/thumbnail/knife-hit.png',
    'long_descp' => 'Throw knives in the wood without loosing any! You have to beat the bosses from time to time so be very careful as their speed can be very fast ',
  ], (object) [
    'title' => 'Gold Miner',
    'descp' => 'Collect gold, stones, and minerals to reach your daily goal.',
    'tags' => ['1 Player', 'Mining', 'Cave', 'Keyboard Skill', 'Catch and Hook', 'Casual'],
    'link' => 'https://www.gameflare.com/embed/gold-miner/',
    'thumbnail' => 'assets/img/thumbnail/gold-miner.png',
    'long_descp' => 'In this game, you are a miner and you have to earn as much money as you need. Be careful: stones and other objects can slow you down.',
  ], (object) [
    'title' => 'Farm Frenzy 2',
    'descp' => 'Perfect your farming skills and increase the income of your agricultural complex!',
    'tags' => ['1 Player', 'Farming', 'Vegetable', 'Building', 'Simulation'],
    'link' => 'https://www.gameflare.com/embed/farm-frenzy-2/',
    'thumbnail' => 'assets/img/thumbnail/farm-frenzy-2.png',
    'long_descp' => 'Experience the farm life. You will have to take care of all sorts of animals. It is essential that the animals eat. Later, they produce a product which you can then sell in the city. Beware of the bears, which sometimes can attack you. With the money you earn, you can buy new animals for your farm, so try to earn as much as possible. Some are really very expensive.',
  ], (object) [
    'title' => '8 Ball Pool',
    'descp' => '8 Ball Pool is an addictive challenging game based on real 3D pool games.',
    'tags' => ['2 Player', 'Multiplayer', 'Sports', 'Pool', 'Social'],
    'link' => 'https://www.gameflare.com/embed/8-ball-pool-multiplayer/',
    'thumbnail' => 'assets/img/thumbnail/8-ball-pool.png',
    'long_descp' => 'Online game 8 Ball Pool Multiplayer is one of the most often played pool games on the internet and in mobile phones. At any moment, thousands of players are connected so finding someone to play with wont be a problem. If one of your friends is online, you can play with him or her. At the beginning you will get some coins for free and you can then use them to enter the game. If you win, youll get the opponents coins as well and you will be able to open new parts of the game. The game also brings a tournament in which you have to win three games in a row. With the coins you win, you can unlock new items or various bonuses that will make the game easier to play. If you open the game every day, you can participate in a raffle and win something.',
  ],
);

$hostname = "localhost";
$username = "root";
$password = null;
$database = "games";
$conn = new mysqli($hostname, $username, $password, $database);

if ($conn->connect_error) {
  die("Connection failed: {$conn->connect_error}");
}

$query = "CREATE DATABASE IF NOT EXISTS games";
mysqli_query($conn, $query);
$db_selected = mysqli_select_db($conn, "games");

$query = "CREATE TABLE IF NOT EXISTS game (
  id INT AUTO_INCREMENT PRIMARY KEY,
  title VARCHAR(255) NOT NULL,
  descp TEXT,
  tags TEXT,
  link VARCHAR(255),
  thumbnail VARCHAR(255),
  long_descp TEXT
);";
mysqli_query($conn, $query);

// Check table if it is empty
$query = "SELECT COUNT(*) as count FROM game";
$results = mysqli_query($conn, $query);

if ($results->num_rows > 0) {
  $row = $results->fetch_assoc();
  $count = $row["count"];

  // If the table is empty, insert data from the games array
  if ($count == 0) {
    foreach ($games as $data) {
      $title = $conn->real_escape_string($data->title);
      $descp = $conn->real_escape_string($data->descp);
      $tags = $conn->real_escape_string(implode(',', $data->tags));
      $link = $conn->real_escape_string($data->link);
      $thumbnail = $conn->real_escape_string($data->thumbnail);
      $long_descp = $conn->real_escape_string($data->long_descp);

      // Insert data into the table
      $query = "INSERT INTO game (title, descp, tags, link, thumbnail, long_descp)
      VALUES ('$title', '$descp', '$tags', '$link', '$thumbnail', '$long_descp');";

      if (mysqli_query($conn, $query) !== TRUE) {
        echo "Error inserting data: " . $conn->error;
        break;
      }
    }
  }
}

$conn->close();
